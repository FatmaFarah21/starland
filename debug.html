<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Configuration</title>
    <style>
        body {
            font-family: monospace;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background: #f6f7f8;
        }
        pre {
            background: white;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            border: 1px solid #ddd;
        }
        h2 { color: #136dec; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üîß Configuration Debug</h1>
    
    <h2>Step 1: Load Supabase Library</h2>
    <pre id="step1">Loading...</pre>
    
    <h2>Step 2: Load Configuration</h2>
    <pre id="step2">Loading...</pre>
    
    <h2>Step 3: Initialize Client</h2>
    <pre id="step3">Loading...</pre>
    
    <h2>Step 4: Load Database Helper</h2>
    <pre id="step4">Loading...</pre>
    
    <h2>Step 5: Test Simple Query</h2>
    <pre id="step5">Loading...</pre>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        document.getElementById('step1').innerHTML = '<span class="success">‚úÖ Supabase library loaded</span><br>' + typeof supabase;
    </script>
    
    <script src="js/supabase-config.js"></script>
    <script>
        document.getElementById('step2').innerHTML = '<span class="success">‚úÖ Configuration loaded</span><br>URL: ' + SUPABASE_CONFIG.URL + '<br>KEY: ' + SUPABASE_CONFIG.ANON_KEY.substring(0, 20) + '...';
    </script>
    
    <script>
        try {
            document.getElementById('step3').innerHTML = '<span class="success">‚úÖ Client initialized</span><br>Type: ' + typeof supabaseClient;
        } catch (e) {
            document.getElementById('step3').innerHTML = '<span class="error">‚ùå Error: ' + e.message + '</span>';
        }
    </script>
    
    <script src="js/supabase-db.js"></script>
    <script>
        try {
            document.getElementById('step4').innerHTML = '<span class="success">‚úÖ Database helper loaded</span><br>window.db: ' + typeof window.db + '<br>Class: ' + window.db.constructor.name;
        } catch (e) {
            document.getElementById('step4').innerHTML = '<span class="error">‚ùå Error: ' + e.message + '</span>';
        }
    </script>
    
    <script>
        async function testQuery() {
            try {
                console.log('Testing query with URL:', SUPABASE_CONFIG.URL);
                const result = await window.db.getProduction();
                document.getElementById('step5').innerHTML = '<span class="success">‚úÖ Query successful!</span><br>Records: ' + (result?.length || 0);
            } catch (e) {
                console.error('Full error:', e);
                document.getElementById('step5').innerHTML = '<span class="error">‚ùå Error: ' + e.message + '</span><br><pre>' + JSON.stringify(e, null, 2) + '</pre>';
            }
        }
        
        window.addEventListener('load', testQuery);
    </script>
</body>
</html>
